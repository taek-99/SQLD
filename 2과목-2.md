## 2-9 서브쿼리

- 서브쿼리

    - 하나의 SQL문 안에 포함된 또 다른 SQL문을 의미

    - 반드시 괄호 안에 묶어야함

- 서브쿼리 사용 가능한 위치

    - SELELT 절

    - FROM 절

    - WHERE 절

- 서브쿼리 종류

    - 동작하는 방식에 따라

        - 비연관 서브쿼리

            - 서브쿼리에 메인쿼리 테이블의 컬럼을 포함하지 않은 형태의 서브쿼리

            - 서브쿼리가 메인 쿼리의 값을 참조하지 않고 독립적으로 실행됨

        - 연관 서브쿼리

            - 서브쿼리에 메인쿼리 테이블의 컬럼을 포한하는 형태의 서브쿼리

            - 메인 쿼리의 각 행에 대해 서브쿼리가 실행됨

    - 위치에 따라

        -  스칼라 서브 쿼리

            - SELECT 절에 사용하는 서브쿼리

            - 서브쿼리 결과를 마치 하나의 컬럼처럼 사용하기 위해 주로 사용

        - 인라인 뷰

            - FROM 절에 사용하는 서브 쿼리

            - 서브쿼리 결과를 테이블처럼 사용하기 위해 주로 사용

        - WHERE 절 서브쿼리

            - 가장 일반적인 서브쿼리

            - 비교 상수 자리에 값을 전달하기 위한 목적으로 주로 사용(상수항 대체)

- EXISTS/ NOT EXISTS 연산자

    - 서브쿼리 조건에 따라 메인쿼리의 출력 결과가 달라짐

    - 서브쿼리 SELECT 절의 출력 형태는 중요하지 않음

    - EXISTS

        - 서브쿼리 결과가 하나라도 존재하면 메인쿼리 출력

    - NOT EXISTS

        - 서브쿼리 결과가 존재하지 않으면 메인쿼리 데이터 출력

    - 다중컬럼 서브쿼리

        - 서브쿼리 결과가 여러 컬럼을 리턴하는 형태

        - 메인쿼리와 비교하는 컬럼이 2개 이상인 형태

    - 상호연관 서브쿼리

        - 메인쿼리와 서브쿼리 간의 비교를 수행하는 형태

        - 비교할 집단이나 조건은 서브쿼리에 명시되어야 함

- 인라인뷰

    - 쿼리 안의 뷰의 형태로, 테이블처럼 조회할 데이터를 정의하기 위해 사용

    - 테이블명이 존재하지 않기 때문에 다른 테이브로가 조인시 반드시 테이블 별칭을 명시해야함


- 스칼라 서브쿼리

    - SELECT 절에 사용하는 쿼리로, 마치 하나의 컬럼처럼 표현하기 위해 사용

    - 각 행마다 스칼라 서브쿼리 결과가 하나여야 함

